use super::MarkovChainModel;
use std::collections::HashSet;
pub struct StarNameGenerator {
    markov : MarkovChainModel,
    used_names : HashSet<String>
}

impl StarNameGenerator {
    pub const SOURCE_NAMES: &'static [&'static str] = &[
        "Acamar",
        "Alpha",
        "Arian",
        "Aghran",
        "Al-aqrab",
        "Ahir",
        "Andromeda",
        "An-nhar",
        "Aquarius",
        "Auriga",
        "Auron",
        "Austrinus",

        "Barrion",
        "Belhammond",
        "Berria",
        "Beta",
        "Brand",

        "Cassiopeia",
        "Cetus",
        "Caladan",
        "Canes",
        //"Canes Venatici",
        "Carina",
        "Centaurus",
        "Cepheus",
        "Cernan",
        "Certus",
        "Coma",
        "Corascia",
        "Corusca",
        //"Coma Berenices",
        "Crax",
        "Crucis",
        "Cygnus",
        "Cygnon",

        "Daedlus",
        "Delrune",
        "Dendra",
        "Dietmar",
        "Dithimar",
        "Dolens",
        "Doom",
        "Dragon",
        "Dresden",
        "Dromar",
        "Dryad",
        "Dyad",

        "Ea",
        "Eidre",
        "Elisande",
        "Elrond",
        "Eradon",
        "Eriand",
        "Eridanus",
        "Eros",
        "Ersand",
        "Ezar",
        "Ezor",

        "Fallia",
        "Fand",
        "Feylan",
        "Fellian",
        "Font",
        "Fornax",
        "Fornath",
        "Foryx",
        "Fu",
        "Fune",
        "Furan",
        "Furiosa",
        "Furyx",

        "Ganon",
        "Gail",
        "Geisand",
        "Gemini",
        "Gydaron",
        "Giausar",
        "Ginan",
        "Gloas",
        "Gomeisa",
        "Gond",
        "Guahayona",
        "Gudja",
        "Gumala",
        "Gyron",

        "Hadar",
        "Haedis",
        "Hatysa",
        "Helion",
        "Helm",
        "Hexam",
        "Hydra",
        "Hylix",
        "Hund",
        "Hunor",

        "Iklil",
        "Indus",
        "Irena",
        "Iskand",
        "Itonda",
        "Izar",

        "Jabbah",
        "Jalar",
        "Jeyan",
        "Jerush",
        "Jishui",
        "Joshan",

        "Kaewkosin",
        "Kalausi",
        "Kamuy",
        "Karaka",
        "Keid",
        "Keran",
        "Khambalia",
        "Kitalpha",
        "Kolan",
        "Komndor",
        "Kornephoros",
        "Kuma",
        "Kurhah",

        "Landrig",
        "Lantion",
        "Landuhar",
        "Larawag",
        "Lerna",
        "Lesath",
        "Lich",
        "Liscor",
        "Lonsan",
        "Lusan",
        "Lushar",
        "Lutris",
        "Lycilin",

        "Maasaym",
        "Macondo",
        "Marfik",
        "Marsic",
        "Menkalinan",
        "Menkar",
        "Mensa",
        "Mirach",
        "Miram",
        "Mizar",
        "Monch",
        "Monoceros",
        "Moriah",
        "Mouhoun",
        "Mpingo",
        "Muscida",

        "Nahn",
        "Nalbus",
        "Naledi",
        "Nekkar",
        "Nembus",
        "Nenque",
        "Nihal",
        "Nimh",
        "Noquisi",
        "Norion",
        "Nosaxa",
        "Nox",
        "Nuki",
        "Nusakan",
        "Nushagak",
        "Nyamien",

        "Oan",
        "Ogma",
        "Okab",
        "Omoyo",
        "Ophiiochus",
        "Orion",
        "Orkaria",
        "Oryx",

        "Parumleo",
        "Petra",
        "Peylus",
        "Pendayo",
        "Phact",
        "Phecda",
        "Pherkad",
        "Philhammon",
        "Phorion",
        "Phondar",
        "Pisces",
        "Pipirima",
        "Poerava",
        "Polaris",
        "Polis",
        "Pollux",
        "Prim",
        "Procyon",
        "Propus",
        "Proxam",

        "Ran",
        "Rasalas",
        "Rasalgethi",
        "Rastaban",
        "Regor",
        "Regulus",
        "Revati",
        "Rhaan",
        "Rigel",
        "Rohan",
        "Rotanev",
        "Ruchbah",
        "Rukbat",

        "Sabik",
        "Saclateni",
        "Sadachbia",
        "Sadalbari",
        "Sadr",
        "Saiph",
        "Samaya",
        "Sargas",
        "Sculptor",
        "Serpens",
        "Sextans",
        "Sham",
        "Sharjah",
        "Shaula",
        "Sheliak",
        "Sheratan",
        "Sika",
        "Sirius",
        "Situla",
        "Solaris",
        "Spica",
        "Stribor",
        "Styx",
        "Sualocin",
        "Subra",
        "Suhail",
        "Sulafat",
        "Syrma",

        "Tabit",
        "Taika",
        "Taiyangshou",
        "Taiyi",
        "Tangra",
        "Tarazad",
        "Tenthan",
        "Terebellum",
        "Tevel",
        "Thabit",
        "Theemin",
        "Thuban",
        "Tiaki",
        "Tianguan",
        "Tianyi",
        "Timir",
        "Tojil",
        "Toliman",
        "Tonatiuh",
        "Trantor",
        "Trinus",
        "Tsang",
        "Tsin",
        "Tucana",
        "Tuiren",
        "Tureis",
        
        "Uabb",
        "Uhlan",
        "Uht",
        "Ukdah",
        "Ukhab",
        "Uklun",
        "Ull",
        "Umman",
        "Unukalhai",
        "Unurgunite",
        "Ur",
        "Uruk",
        "Uten",
        "Uuba",

        "Vega",
        "Veylan",
        "Vindemiatrix",
        "Viss",
        "Virgo",
        "Voss",
        "Vox",

        "Wasat",
        "Walhannis",
        "Weynhab",
        "Wezen",
        "Windarr",
        "Wolcan",
        "Wulrant",
        "Wouri",
        "Wurren",

        "Xamidimura",
        "Xerant",
        "Xeyhab",
        "Xihe",
        "Xo",
        "Xoss",
        "Xuange",

        "Yanda",
        "Yantris",
        "Yed",
        "Yehalan",
        "Yildun",
        "Yixam",
        "Yondarr",
        "Yoss",
        "Yorian",
        "Yoht",

        "Zaniah",
        "Zass",
        "Zaurak",
        "Zhang",
        "Zibal",
        "Zin",
        "Zoss",
        "Zoloss",
        "Zosma",
        "Zuben"
    ];

    pub fn new() -> Self {
        let mut markov = MarkovChainModel::new(3);
        let mut used_names : HashSet<String> = HashSet::new();
        let mut names = Vec::<String>::new();
        for starname in Self::SOURCE_NAMES {
            names.push(starname.to_string());
            used_names.insert(starname.to_string());
        }
        markov.build(&names, 0.00001);

        Self {
            markov,
            used_names
        }
    }

    pub fn next(&mut self) -> String {
        let mut res : String = self.markov.generate();

        while res.len() > 15 || self.used_names.contains(&res) {
            res = self.markov.generate();
        }
        self.used_names.insert(res.clone());

        res
    }
}